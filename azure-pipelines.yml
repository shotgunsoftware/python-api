variables:
  group: ci-credentials

jobs:
# Lints our code.
- job: Linting
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: 3.x
      addToPath: True
  - script: |
      python -m pip install --upgrade pip setuptools wheel
      python -m pip install flake8
    displayName: 'Install tools'
  - script: python -m flake8
    displayName: 'Linting'

- template: azure-pipelines-templates/run-tests.yml
  parameters:
    name: Linux
    vm_image: 'ubuntu-16.04'

- template: azure-pipelines-templates/run-tests.yml
  parameters:
    name: macOS
    vm_image: 'macOS-10.13'

- template: azure-pipelines-templates/run-tests.yml
  parameters:
    name: Windows
    vm_image: 'vs2017-win2016'
