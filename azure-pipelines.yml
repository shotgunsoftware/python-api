# We've stored some variables in Azure. They contain credentials
# and are encrypted. They are also not available to clients.
# This statement says which variable groups this repo requires.
# We have two: one that can be shared by all repos that use CI
# and another that is used just by the Python API, which creates
# HumanUser's and as such need a password, which we can't
# hardcode in the .yml files.
variables:
  - group: sg-credentials

# This here is the list of jobs we want to run for our build.
# Jobs run in parallel.
jobs:

# These are jobs templates, they allow to reduce the redundancy between
# variations of the same build. We pass in the image name
# and a friendly name that then template can then use to create jobs.
- template: azure-pipelines-templates/run-tests.yml
  parameters:
    name: Linux
    vm_image: 'ubuntu-20.04'

- template: azure-pipelines-templates/run-tests.yml
  parameters:
    name: macOS
    vm_image: 'macOS-10.15'

- template: azure-pipelines-templates/run-tests.yml
  parameters:
    name: Windows
    vm_image: 'windows-2019'
